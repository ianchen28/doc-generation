# service/src/doc_agent/prompts/planner.py
"""
规划器提示词模板
"""

V1_DEFAULT = """
**角色:** 你是一位专业的研究规划专家，负责为文档生成制定详细的研究计划。

**文档主题:** {topic}

**任务要求:**
基于给定的主题，制定一个详细的研究计划，包括：
1. 核心研究问题
2. 关键搜索查询
3. 预期信息源类型
4. 研究优先级

**输出格式:**
请以JSON格式输出，包含以下字段：
- research_questions: 核心研究问题列表
- search_queries: 搜索查询列表（3-5个）
- source_types: 预期信息源类型
- priority_areas: 研究优先级排序

**示例输出:**
```json
{{
  "research_questions": ["问题1", "问题2"],
  "search_queries": ["查询1", "查询2", "查询3"],
  "source_types": ["学术论文", "技术报告", "专家观点"],
  "priority_areas": ["高优先级", "中优先级", "低优先级"]
}}
```

请立即开始制定研究计划。
"""

# 简化版本的规划器prompt
V1_SIMPLE = """
**角色:** 你是一位研究规划专家，为简化任务制定研究计划。

**文档主题:** {topic}

**任务要求:**
制定一个简化的研究计划，包括：
1. 2-3个核心研究问题
2. 2-3个关键搜索查询
3. 预期信息源类型

**输出格式:**
```json
{{
  "research_plan": "简化的研究计划：分析量子比特的基本概念和叠加态原理，收集相关技术资料和专家观点。",
  "search_queries": ["查询1", "查询2"],
  "source_types": ["网页", "文档"],
  "priority_areas": ["高优先级", "中优先级"]
}}
```

请立即开始制定研究计划。
"""

# 从 nodes.py 提取的备用模板
V1_FALLBACK = """
你是一个专业的研究规划专家。请为以下章节制定详细的研究计划和搜索策略。

**文档主题:** {topic}

**当前章节信息:**
- 章节标题: {chapter_title}
- 章节描述: {chapter_description}

{sub_sections_text}

**任务要求:**
1. 分析章节主题和子节结构，确定研究重点和方向
2. 制定详细的研究计划，包括研究步骤和方法
3. 生成5-8个高质量的搜索查询，用于收集相关信息
4. 确保搜索查询具有针对性和全面性，覆盖所有子节内容
5. 根据子节结构优化研究计划，确保每个子节都有相应的研究内容

**输出格式:**
请以JSON格式返回结果，包含以下字段：
- research_plan: 详细的研究计划
- search_queries: 搜索查询列表（数组）

请立即开始制定研究计划。
"""

# 快速版本的规划器prompt
V2_FAST = """
你是一个专业的研究规划专家。请为以下章节制定简化的研究计划和搜索策略。

**文档主题:** {topic}
**当前章节:** {chapter_title}
**章节描述:** {chapter_description}

请严格按照以下 JSON 格式输出，不要包含任何其他内容：

{{
    "research_plan": "简要的研究计划，包括：1. 需要了解的核心概念 2. 需要收集的关键信息",
    "search_queries": ["搜索查询1", "搜索查询2"]
}}

要求：
1. research_plan 应该是一个简化的步骤计划
2. search_queries 应该包含2个具体的搜索查询，覆盖章节的主要方面
3. 必须严格按照 JSON 格式输出，确保 JSON 格式正确
4. 搜索查询应该使用通用关键词，确保能在知识库中找到相关内容
5. 搜索查询应该针对当前章节的核心内容
"""

# 快速版本的规划器prompt（来自fast_prompts）
V3_FAST = """
你是一个专业的研究规划专家。请为以下章节制定简化的研究计划和搜索策略。

**文档主题:** {topic}
**当前章节:** {chapter_title}
**章节描述:** {chapter_description}

请严格按照以下 JSON 格式输出，不要包含任何其他内容：

{{
    "research_plan": "简要的研究计划，包括：1. 需要了解的核心概念 2. 需要收集的关键信息",
    "search_queries": ["搜索查询1", "搜索查询2"]
}}

要求：
1. research_plan 应该是一个简化的步骤计划
2. search_queries 应该包含2个具体的搜索查询，覆盖章节的主要方面
3. 必须严格按照 JSON 格式输出，确保 JSON 格式正确
4. 搜索查询应该使用通用关键词，确保能在知识库中找到相关内容
5. 搜索查询应该针对当前章节的核心内容
"""

# 支持版本选择的PROMPTS字典
PROMPTS = {
    "v1_default": V1_DEFAULT,
    "v1_simple": V1_SIMPLE,
    "v1_fallback": V1_FALLBACK,
    "v2_fast": V2_FAST,
    "v3_fast": V3_FAST
}
